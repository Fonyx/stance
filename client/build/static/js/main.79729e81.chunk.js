(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{203:function(e,n,t){},215:function(e,n,t){},217:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),o=t(65),r=t.n(o),i=(t(203),t(17)),l=t(172),s=t(290),u=t(291),d=t(284),j=t(170),b=t(45),h=t(23),g=t(303),O=t(302),p=t(305),m=t(307),f=t(308),x=t(306),v=t(162),y=t.n(v),C=t(28),S=t(29),k=t(142),w=new(function(){function e(){Object(C.a)(this,e)}return Object(S.a)(e,[{key:"getProfile",value:function(){return Object(k.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(k.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){if("undefined"===e)throw new Error('Token received was "undefined" as string, weird, bailing');localStorage.setItem("id_token",e),window.location.assign("/home")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),A=t(1);function $(){return Object(A.jsx)(O.a,{sx:{flexGrow:1},children:Object(A.jsx)(g.a,{position:"static",children:Object(A.jsxs)(p.a,{children:[Object(A.jsx)(x.a,{size:"large",edge:"start",color:"primary","aria-label":"menu",sx:{mr:2},children:Object(A.jsx)(y.a,{})}),Object(A.jsx)(m.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Stance"}),w.loggedIn()?Object(A.jsxs)(c.a.Fragment,{children:[Object(A.jsx)(f.a,{color:"secondary",variant:"contained",onClick:function(e){e.preventDefault(),w.logout()},children:"Logout"}),Object(A.jsx)(f.a,{color:"secondary",variant:"contained",href:"/createTransaction",children:"Create Transaction"}),Object(A.jsx)(f.a,{color:"secondary",variant:"contained",href:"/createAccount",children:"Create Account"})]}):Object(A.jsx)(c.a.Fragment,{})]})})})}var D=t(9),N=t(164),T=t.n(N),I=t(163),B=t.n(I),E=t(165),F=t.n(E),P=t(309),q=t(310);function Y(){var e=Object(a.useState)("home"),n=Object(D.a)(e,2),t=n[0],c=n[1];return Object(A.jsxs)(P.a,{showLabels:!0,value:t,onChange:function(e,n){c(n)},children:[Object(A.jsx)(q.a,{label:"Recents",icon:Object(A.jsx)(B.a,{})}),Object(A.jsx)(q.a,{label:"Favorites",icon:Object(A.jsx)(T.a,{})}),Object(A.jsx)(q.a,{label:"Nearby",icon:Object(A.jsx)(F.a,{})})]})}var _=t(3),R=t(311),L=t(295),H=t(289),V=t(294),U=t(297),G=t(292);function K(e){var n=e.parties,t=e.values,c=e.handleChange,o=e.handleSelectChange,r=e.nextStep,l=Object(a.useState)([]),s=Object(D.a)(l,2),u=s[0],d=s[1];return Object(A.jsxs)("div",{children:[Object(A.jsxs)(R.a,{sx:{width:"25ch"},children:[Object(A.jsx)(L.a,{id:"type",children:"Type"}),Object(A.jsxs)(H.a,{labelId:"type",id:"type",value:t.type,label:"Type",onChange:c("type"),children:[Object(A.jsx)(V.a,{value:"money",children:"money"}),Object(A.jsx)(V.a,{value:"crypto",children:"crypto"}),Object(A.jsx)(V.a,{value:"stock",children:"stock"})]})]}),Object(A.jsx)(U.a,{id:"accountName",onChange:c("name"),label:"Account Name",value:t.name,placeholder:"My new account"}),Object(A.jsx)(U.a,{id:"openingBalance",onChange:c("openingBalance"),label:"Balance",value:t.openingBalance,placeholder:"0.00"}),Object(A.jsx)(G.a,{disablePortal:!0,clearOnBlur:!0,selectOnFocus:!0,handleHomeEndKeys:!0,id:"3partyAffiliate",name:"3partyAffiliate",options:n,getOptionLabel:function(e){return e.name},isOptionEqualToValue:function(e,n){return e.name===n.name},sx:{width:300},onChange:o(),renderInput:function(e){return Object(A.jsx)(U.a,Object(i.a)(Object(i.a)({},e),{},{label:"3rd Party"}))}}),Object(A.jsx)(f.a,{onClick:function(e){e.preventDefault(),function(){var e=!0,n=[];return t.name||n.push("You need to name your account"),t.openingBalance||0!==t.openingBalance&&n.push("You need set a balance for your account"),t.openingBalance&&isNaN(t.openingBalance)&&-1!==!t.openingBalance.toString().indexOf(".")&&n.push("That balance isn't valid"),d(n),n.length>0&&(e=!1),e}()&&(console.log("Progressing form"),r())},variant:"outlined",children:"Continue"}),Object(A.jsx)(f.a,{href:"/home",variant:"outlined",children:"Cancel"}),Object(A.jsx)("div",{id:"error",children:u.map((function(e){return Object(A.jsx)("div",{children:e})}))})]})}var M=t(313);function z(e){var n=e.currencies,t=e.handleSelectCurrency,c=e.handleChange,o=e.values,r=e.nextStep,l=e.prevStep,s=Object(a.useState)([]),u=Object(D.a)(s,2),d=u[0],j=u[1];return Object(A.jsxs)("div",{children:[Object(A.jsx)("h1",{children:"Specific Money Details"}),Object(A.jsx)(G.a,{disablePortal:!0,clearOnBlur:!0,selectOnFocus:!0,handleHomeEndKeys:!0,id:"currency",name:"currency",options:n,getOptionLabel:function(e){return e.name},isOptionEqualToValue:function(e,n){return e.name===n.name},sx:{width:300},onChange:t(),renderInput:function(e){return Object(A.jsx)(U.a,Object(i.a)(Object(i.a)({},e),{},{label:"Currency"}))}}),Object(A.jsx)(U.a,{label:"Interest Rate",id:"interestRate",onChange:c("interestRate"),InputProps:{endAdornment:Object(A.jsx)(M.a,{position:"start",children:"%"})}}),Object(A.jsx)(f.a,{onClick:function(e){e.preventDefault(),function(){var e=!0,n=[];return console.log("state is: ",o),o.currency||n.push("You need to choose a currency"),o.interestRate&&isNaN(o.interestRate)&&-1!==!o.interestRate.toString().indexOf(".")&&n.push("That interest rate looks wrong"),j(n),n.length>0&&(e=!1),console.log("Form Valid"),e}()&&(console.log("Progressing form"),r())},variant:"outlined",children:"Continue"}),Object(A.jsx)(f.a,{onClick:function(e){e.preventDefault(),l()},variant:"outlined",children:"Back Up"}),Object(A.jsx)("div",{id:"error",children:d.map((function(e){return Object(A.jsx)("div",{children:e})}))})]})}function J(e){var n=e.cryptos,t=e.handleSelectCrypto,c=e.values,o=e.nextStep,r=e.prevStep,l=Object(a.useState)([]),s=Object(D.a)(l,2),u=s[0],d=s[1];return Object(A.jsxs)("div",{children:[Object(A.jsx)("h1",{children:"Specific Crypto Details"}),Object(A.jsx)(G.a,{disablePortal:!0,clearOnBlur:!0,selectOnFocus:!0,handleHomeEndKeys:!0,id:"crypto",name:"crypto",options:n,getOptionLabel:function(e){return e},isOptionEqualToValue:function(e,n){return e===n},sx:{width:300},onChange:t(),renderInput:function(e){return Object(A.jsx)(U.a,Object(i.a)(Object(i.a)({},e),{},{label:"Crypto"}))}}),Object(A.jsx)("div",{id:"error",children:u.map((function(e){return Object(A.jsx)("div",{children:e})}))}),Object(A.jsx)(f.a,{onClick:function(e){e.preventDefault(),r()},variant:"outlined",children:"Back Up"}),Object(A.jsx)(f.a,{onClick:function(e){e.preventDefault(),function(){var e=!0,n=[];return console.log("state is: ",c),c.assetCode||n.push("You need to specify a ticker code"),d(n),n.length>0&&(e=!1),e}()&&(console.log("Progressing form"),o())},variant:"outlined",children:"Continue"})]})}var W,Q,X,Z,ee,ne,te,ae=t(26),ce=t(288),oe=Object(ce.a)(W||(W=Object(ae.a)(["\n    query {\n        userAccounts{\n            _id\n            name\n            type\n            balance\n            unitPrice\n            currency{\n                name\n                usdValue\n            }\n        }\n    }\n"]))),re=Object(ce.a)(Q||(Q=Object(ae.a)(["\n    query userAccountTransactions(\n        $accountId: String!\n    ){\n        userAccountTransactions(\n        accountId: $accountId\n        ){\n            description\n            amount\n            date\n        }\n    }\n"]))),ie=(Object(ce.a)(X||(X=Object(ae.a)(["\n    query{\n        allParties{\n            _id\n            name\n            type\n            user{\n                username\n            }\n            description\n            website\n            logo\n            style {\n                color\n                shade\n            }\n        }\n    }\n"]))),Object(ce.a)(Z||(Z=Object(ae.a)(["\n    query{\n        allCurrencies{\n            _id\n            code\n            name\n            symbol\n            usdValue\n        }\n    }\n"]))),Object(ce.a)(ee||(ee=Object(ae.a)(["\n    query{\n        allExchanges{\n            _id\n            code\n            name\n        }\n    }\n"]))),Object(ce.a)(ne||(ne=Object(ae.a)(["\nquery{\n    getAllPrimitives{\n        currencies{\n          _id\n          name\n          code\n        }\n        exchanges{\n          _id\n          name\n          code\n        }\n        parties {\n          _id\n          name\n        }\n        cryptos{\n            Code\n            Name\n        }\n    }\n}\n"])))),le=Object(ce.a)(te||(te=Object(ae.a)(["\n    query checkStockCode(\n        $assetCode: String!\n        $exchangeCode: String!\n    ){\n        checkStockCode(\n        assetCode: $assetCode\n        exchangeCode: $exchangeCode\n        ){\n            exists\n            unitPrice\n            name\n        }\n    }\n"]))),se=t(277);function ue(e){var n=e.exchanges,t=e.handleSelectExchange,c=e.handleChange,o=e.values,r=e.nextStep,l=e.prevStep,s=Object(a.useState)([]),u=Object(D.a)(s,2),d=u[0],j=u[1],b=!1,h=Object(se.a)(le),g=Object(D.a)(h,2),O=g[0],p=g[1],m=p.loading,x=(p.error,p.data);return x&&x.checkStockCode.exists&&(b=!0),Object(A.jsxs)("div",{children:[Object(A.jsx)("h1",{children:"Specific Asset Details"}),Object(A.jsx)(G.a,{disablePortal:!0,clearOnBlur:!0,selectOnFocus:!0,handleHomeEndKeys:!0,id:"exchange",name:"exchange",options:n,getOptionLabel:function(e){return e.name},isOptionEqualToValue:function(e,n){return e.name===n.name},sx:{width:300},onChange:t(),renderInput:function(e){return Object(A.jsx)(U.a,Object(i.a)(Object(i.a)({},e),{},{label:"Exchange"}))}}),Object(A.jsx)(U.a,{label:"Ticker Code",id:"assetCode",onChange:c("assetCode")}),Object(A.jsx)("div",{id:"error",children:d.map((function(e){return Object(A.jsx)("div",{children:e})}))}),Object(A.jsx)(f.a,{onClick:function(e){O({variables:{assetCode:o.assetCode,exchangeCode:o.exchangeCode}})},variant:"outlined",children:"Search Code"}),Object(A.jsx)(f.a,{onClick:function(e){e.preventDefault(),l()},variant:"outlined",children:"Back Up"}),m?Object(A.jsx)("div",{children:"Checking your ticker"}):Object(A.jsx)("div",{}),b?Object(A.jsxs)("div",{children:["Valid Ticker Code",Object(A.jsx)(f.a,{onClick:function(e){e.preventDefault(),function(){var e=!0,n=[];return console.log("state is: ",o),o.assetCode||n.push("You need to specify a ticker code"),j(n),n.length>0&&(e=!1),e}()&&(console.log("Progressing form"),r())},variant:"outlined",children:"Continue"})]}):Object(A.jsx)("div",{children:"Not Valid Ticker Code"})]})}var de,je,be,he,ge=t(317),Oe=t(286),pe=t(128),me=t(285),fe=t(282),xe=Object(ce.a)(de||(de=Object(ae.a)(["\n    mutation signIn($email: String!, $password: String!){\n        signIn(email: $email, password: $password){\n            token\n            user{\n                _id\n                username\n            }\n        }\n    }\n"]))),ve=Object(ce.a)(je||(je=Object(ae.a)(["\n    mutation signUp($username: String!, $email: String!, $password: String!\n    ){\n        signUp(username: $username,email: $email,password: $password\n        ){\n            token\n            user{\n                _id\n                username\n            }\n        }\n    }\n"]))),ye=Object(ce.a)(be||(be=Object(ae.a)(["\n    mutation createTransaction(\n        $toAccount: String!,\n        $fromAccount: String!,\n        $description: String!,\n        $date: String!,\n        $amount: Float,\n        $frequency: String!,\n        $endRecurrence: String\n    ){\n        createTransaction(\n        input: {\n            toAccount: $toAccount,\n            fromAccount: $fromAccount,\n            description: $description,\n            date: $date,\n            amount: $amount,\n            frequency: $frequency,\n            endRecurrence: $endRecurrence\n        }\n        ) {\n        fromAccount{\n            name\n        }\n        toAccount{\n            name\n        }\n        }\n    }\n"]))),Ce=Object(ce.a)(he||(he=Object(ae.a)(["\n    mutation createAccountFE(\n        $name: String!\n        $type: String!\n        $openingBalance: Float!\n        $interestRate: Float\n        $compounds: String\n        $party: String\n        $assetCode: String\n        $currency: String\n        $exchangeCode: String\n        $goalDate: String\n        $goalAmount: Float\n        $tags: String\n    ){\n        createAccountFE(\n        input: {\n            name: $name\n            type: $type\n            openingBalance: $openingBalance\n            interestRate: $interestRate\n            compounds: $compounds\n            party: $party\n            assetCode: $assetCode\n            currency: $currency\n            exchangeCode: $exchangeCode\n            goalDate: $goalDate\n            goalAmount: $goalAmount\n            tags: $tags\n        }\n        ){\n        user{\n            username\n        }\n        name\n        openingBalance\n        balance\n        type\n        compounds\n        party{\n            name\n        }\n        currency{\n            code\n        }\n        exchange{\n            name\n        }\n        }\n    }\n"])));function Se(e){var n=e.values,t=e.handleChange,c=e.handleGoalDateChange,o=e.prevStep,r=Object(a.useState)([]),l=Object(D.a)(r,2),s=l[0],u=l[1],d=Object(ge.a)(Ce),j=Object(D.a)(d,2),b=j[0],h=j[1];if(h.loading)return"Submitting...";h.error&&console.log(h.error.message),h.data&&(console.log("Congratulations you beautiful man"),console.log(h.data));var g=function(){console.log(n),b({variables:n})};return Object(A.jsx)("div",{children:Object(A.jsxs)(fe.b,{dateAdapter:me.a,locale:pe.a,children:[Object(A.jsx)("h1",{children:"Tags and Goal"}),Object(A.jsx)(U.a,{id:"tags",label:"Tags",value:n.tags,placeholder:"Low risk, mortgage, 20yrs",onChange:t("tags")}),Object(A.jsx)(Oe.a,{required:"false",label:"Goal Date",value:n.goalDate,onChange:function(e){return c(e)},renderInput:function(e){return Object(A.jsx)(U.a,Object(i.a)({},e))}}),Object(A.jsx)(U.a,{id:"goalAmount",label:"Goal Amount",value:n.goalAmount,placeholder:"10000",onChange:t("goalAmount"),InputProps:{startAdornment:Object(A.jsx)(M.a,{position:"start",children:"$"})}}),Object(A.jsx)(f.a,{onClick:function(e){e.preventDefault(),console.log("Sending form"),function(){var e=!0,t=[];return(n.goalDate||n.goalAmount)&&(n.goalDate&&n.goalAmount||t.push("You need a date and an amount if you want to set a goal at all - get serious")),n.goalDate&&n.goalDate<new Date&&t.push("Goal Date must be in the future"),n.goalAmount&&isNaN(n.goalAmount)&&-1!==!n.goalAmount.toString().indexOf(".")&&t.push("That goal amount isn't valid"),u(t),t.length>0&&(e=!1),e}()&&(console.log("Valid form sending"),g())},variant:"outlined",children:"Continue"}),Object(A.jsx)(f.a,{onClick:function(e){e.preventDefault(),o()},variant:"outlined",children:"Back"}),Object(A.jsx)(f.a,{href:"/",variant:"outlined",children:"Cancel"}),Object(A.jsx)("div",{id:"error",children:s.map((function(e){return Object(A.jsx)("div",{children:e})}))})]})})}var ke=t(283),we={name:"",type:"money",openingBalance:0,interestRate:null,compounds:"monthly",party:null,currency:"",exchangeCode:"CC",assetCode:"",tags:"",goalAmount:"",goalDate:""};function Ae(){var e=Object(a.useState)(we),n=Object(D.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(1),r=Object(D.a)(o,2),l=r[0],s=r[1],u=Object(ke.a)(ie,{}),d=u.loading,j=u.data,b=(null===j||void 0===j?void 0:j.getAllPrimitives.parties)||[],h=(null===j||void 0===j?void 0:j.getAllPrimitives.currencies)||[],g=(null===j||void 0===j?void 0:j.getAllPrimitives.exchanges)||[],O=(null===j||void 0===j?void 0:j.getAllPrimitives.cryptos)||[],p=O.map((function(e){return e.Name})),m=p.filter((function(e,n){return p.indexOf(e)===n})),f=function(){s(l+1)},x=function(){s(l-1)},v=function(e){return function(n){console.log("Handling Change"),console.log(e,n);var a=n.target.value,o=parseFloat(a);isNaN(o)||(a=o),c(Object(i.a)(Object(i.a)({},t),{},Object(_.a)({},e,a)))}};console.log("current Step: ",l);var y={type:t.type,name:t.name,openingBalance:t.openingBalance,interestRate:t.interestRate,compounds:t.compounds,party:t.party,currency:t.currency,exchangeCode:t.exchangeCode,assetCode:t.assetCode,tags:t.tags,goalAmount:t.goalAmount,goalDate:t.goalDate};if(d)return Object(A.jsx)("div",{children:"Loading Your Data"});switch(l){case 1:return Object(A.jsx)(K,{parties:b,values:y,handleChange:v,handleSelectChange:function(){return function(e){console.log("Handling Exchange change"),console.log("event: ",e);var n=e.target.textContent,a="";console.log("Party Name of event: ",n),a=n?b.find((function(e){return e.name===n}))._id:"",console.log("PartyId after filtering data: ",a),c(Object(i.a)(Object(i.a)({},t),{},{party:a}))}},nextStep:f});case 2:return"money"===y.type?Object(A.jsx)(z,{values:y,currencies:h,handleSelectCurrency:function(){return function(e){console.log("Handling Currency change"),console.log("event: ",e);var n=e.target.textContent,a="";console.log("Currency Name of event: ",n),a=n?h.find((function(e){return e.name===n}))._id:"",console.log("CurrencyId after filtering data: ",a),c(Object(i.a)(Object(i.a)({},t),{},{currency:a}))}},nextStep:f,prevStep:x,handleChange:v}):"crypto"===y.type?Object(A.jsx)(J,{values:y,cryptos:m,handleSelectCrypto:function(){return function(e){console.log("Handling Crypto change"),console.log("event: ",e);var n=e.target.textContent,a="";console.log("Crypto Name of event: ",n),a=n?O.find((function(e){return e.Name===n})).Code:"",console.log("Crypto after filtering data: ",a),c(Object(i.a)(Object(i.a)({},t),{},{assetCode:a}))}},nextStep:f,prevStep:x,handleChange:v}):"stock"===y.type?Object(A.jsx)(ue,{values:y,exchanges:g,handleSelectExchange:function(){return function(e){console.log("Handling Exchange change"),console.log("event: ",e);var n=e.target.textContent,a="";console.log("Exchange Name of event: ",n),a=n?g.find((function(e){return e.name===n})).code:"",console.log("Exchange after filtering data: ",a),c(Object(i.a)(Object(i.a)({},t),{},{exchangeCode:a}))}},nextStep:f,prevStep:x,handleChange:v}):Object(A.jsx)("div",{children:"Empty return"});case 3:return Object(A.jsx)(Se,{values:y,handleChange:v,prevStep:x,handleGoalDateChange:function(e){console.log("state date: ",e),c(Object(i.a)(Object(i.a)({},t),{},{goalDate:e}))}});default:console.log("This is a multi-step form built with React.")}}var $e=t(299),De=t(315);function Ne(){return Object(A.jsx)($e.a,{container:!0,spacing:2,direction:"column",alignItems:"center",justifyContent:"center",style:{minHeight:"60vh"},children:Object(A.jsx)($e.a,{item:!0,xs:12,children:Object(A.jsxs)(De.a,{variant:"text","aria-label":"outlined primary button group",children:[Object(A.jsx)(f.a,{href:"/signup",children:"Sign Up"}),Object(A.jsx)(f.a,{href:"/signin",children:"Sign In"})]})})})}function Te(){var e=Object(ke.a)(oe,{}),n=e.loading,t=e.data,a=(null===t||void 0===t?void 0:t.userAccounts)||{};return n?Object(A.jsx)("div",{children:"Loading..."}):Object(A.jsx)("div",{className:"account-rows",children:a&&a.map((function(e){return Object(A.jsx)("div",{children:Object(A.jsxs)(f.a,{LinkComponent:b.b,color:"secondary",variant:"contained",to:"/account/".concat(e._id),children:[e.name," ",e.balance]})},e._id)}))})}var Ie=t(59),Be=t.n(Ie),Ee=t(82);function Fe(e){var n=Object(a.useState)({email:"",password:""}),t=Object(D.a)(n,2),c=t[0],o=t[1],r=Object(ge.a)(xe),l=Object(D.a)(r,2),s=l[0],u=l[1],d=u.error,j=u.data,h=function(e){var n=e.target,t=n.name,a=n.value;o(Object(i.a)(Object(i.a)({},c),{},Object(_.a)({},t,a)))},g=function(){var e=Object(Ee.a)(Be.a.mark((function e(n){var t,a;return Be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(c),e.prev=2,e.next=5,s({variables:Object(i.a)({},c)});case 5:t=e.sent,a=t.data,console.log("response token from server was",a.signIn.token),w.login(a.signIn.token),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0);case 14:o({email:"",password:""});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(n){return e.apply(this,arguments)}}();return Object(A.jsxs)("div",{children:[j?Object(A.jsxs)("p",{children:["Success! You may now head"," ",Object(A.jsx)(b.b,{to:"/",children:"back to the homepage."})]}):Object(A.jsxs)("form",{onSubmit:g,children:[Object(A.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:c.email,onChange:h}),Object(A.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:c.password,onChange:h}),Object(A.jsx)("button",{className:"btn btn-block btn-primary",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),d&&Object(A.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:d.message})]})}var Pe=function(){var e=Object(a.useState)({username:"",email:"",password:""}),n=Object(D.a)(e,2),t=n[0],c=n[1],o=Object(ge.a)(ve),r=Object(D.a)(o,2),l=r[0],s=r[1],u=s.error,d=s.data,j=function(e){var n=e.target,a=n.name,o=n.value;c(Object(i.a)(Object(i.a)({},t),{},Object(_.a)({},a,o)))},h=function(){var e=Object(Ee.a)(Be.a.mark((function e(n){var a,c;return Be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(t),e.prev=2,e.next=5,l({variables:Object(i.a)({},t)});case 5:a=e.sent,c=a.data,console.log("response token from server was",c.signUp.token),w.login(c.signUp.token),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(n){return e.apply(this,arguments)}}();return Object(A.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(A.jsx)("div",{className:"col-12 col-lg-10",children:Object(A.jsxs)("div",{className:"card",children:[Object(A.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Sign Up"}),Object(A.jsxs)("div",{className:"card-body",children:[d?Object(A.jsxs)("p",{children:["Success! You may now head"," ",Object(A.jsx)(b.b,{to:"/",children:"back to the homepage."})]}):Object(A.jsxs)("form",{onSubmit:h,children:[Object(A.jsx)("input",{className:"form-input",placeholder:"Your username",name:"username",type:"text",value:t.name,onChange:j}),Object(A.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:t.email,onChange:j}),Object(A.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:t.password,onChange:j}),Object(A.jsx)("button",{className:"btn btn-block btn-primary",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),u&&Object(A.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:u.message})]})]})})})};function qe(){var e=Object(h.f)();console.log(e.id);var n=Object(ke.a)(re,{variables:{accountId:e.id}}),t=n.loading,a=n.data;if(t)return Object(A.jsx)("div",{children:"Loading..."});var c=(null===a||void 0===a?void 0:a.userAccountTransactions)||[];return Object(A.jsx)("div",{className:"account-rows",children:c&&c.map((function(e){return Object(A.jsx)("div",{children:Object(A.jsxs)(f.a,{LinkComponent:b.b,color:"primary",variant:"contained",to:"/transaction/".concat(e._id),children:[e.description," ",e.amount," ",e.date]})},e._id)}))})}function Ye(){var e=Object(a.useState)({}),n=Object(D.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)({}),r=Object(D.a)(o,2),l=r[0],s=r[1],u=Object(a.useState)(""),d=Object(D.a)(u,2),j=d[0],b=d[1],h=Object(a.useState)(0),g=Object(D.a)(h,2),O=g[0],p=g[1],m=Object(a.useState)("once"),x=Object(D.a)(m,2),v=x[0],y=x[1],C=Object(a.useState)(new Date),S=Object(D.a)(C,2),k=S[0],w=S[1],$=Object(a.useState)(null),N=Object(D.a)($,2),T=N[0],I=N[1],B=Object(a.useState)([]),E=Object(D.a)(B,2),F=E[0],P=E[1],q=Object(ke.a)(oe,{}),Y=q.loading,_=q.data,K=Object(ge.a)(ye),M=Object(D.a)(K,2),z=M[0],J=M[1];if(J.loading)return"Submitting...";if(J.error)return console.log(J),"Submission error! ".concat(J.error.message);var W=(null===_||void 0===_?void 0:_.userAccounts)||[],Q=function(e){var n=e.target;if(console.log("Input Event triggered: "),console.log("target: ",n),"description"===n.name){var t=n.value;b(t)}if("amount"===n.name){var a=n.value;p(a)}"frequency"===n.name&&y(n.value)},X=function(){var e=!0,n=[];return(null===t||void 0===t?void 0:t.balance)||(null===l||void 0===l?void 0:l.balance)||n.push("You need to choose at least one account"),(null===t||void 0===t?void 0:t.balance)&&(null===l||void 0===l?void 0:l.balance)&&t.name===l.name&&n.push("You can't send money to the same account"),(!O||O<0)&&n.push("You need to specify a positive amount"),(null===l||void 0===l?void 0:l.balance)&&O>l.balance&&n.push("You can't transfer more than the balance of the from account for the transaction"),(null===l||void 0===l?void 0:l.balance)&&isNaN(l.balance)&&-1!==!l.balance.toString().indexOf(".")&&n.push("That fromAccount balance isn't valid"),(null===t||void 0===t?void 0:t.balance)&&isNaN(t.balance)&&-1!==!t.balance.toString().indexOf(".")&&n.push("That toAccount balance isn't valid"),j||n.push("You need to describe the transaction, your future self with thank you"),k||n.push("You need to set a date for this transaction to happen"),"once"===v||T||n.push("You need to specify when this transaction ends"),P(n),n.length>0&&(e=!1),e},Z=function(){var e=Object(Ee.a)(Be.a.mark((function e(n){var a;return Be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault();try{X()&&(a={toAccount:t._id,fromAccount:l._id,amount:O,description:j,date:k,frequency:v,endRecurrence:T},console.log("payload: ",a),z({variables:a}),console.log(J),J.error?P(J.error):window.location.reload(),c({}),s({}),b(""),p(0),y("once"),w(new Date),I(null))}catch(o){console.error(o)}case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Y?Object(A.jsx)("div",{children:"Loading Your Details..."}):Object(A.jsxs)("div",{children:[Object(A.jsx)("h1",{children:"NEW TRANSACTION"}),Object(A.jsx)("form",{onSubmit:Z,children:Object(A.jsxs)(fe.b,{dateAdapter:me.a,locale:pe.a,children:[Object(A.jsx)(G.a,{disablePortal:!0,clearOnBlur:!0,selectOnFocus:!0,handleHomeEndKeys:!0,id:"fromAccount",name:"fromAccount",options:W,getOptionLabel:function(e){return e.name},isOptionEqualToValue:function(e,n){return e.name===n.name},sx:{width:300},onChange:function(e){console.log("Handling Currency change"),console.log("event: ",e);var n=e.target.textContent,t="";console.log("Account of event: ",t),n?(t=W.find((function(e){return e.name===n})),console.log("Account after filtering data: ",t),s(Object(i.a)({},t))):s({})},renderInput:function(e){return Object(A.jsx)(U.a,Object(i.a)(Object(i.a)({},e),{},{label:"From Account"}))}}),l.balance?Object(A.jsxs)("div",{children:[l.balance,Object(A.jsx)(f.a,{onClick:function(){if(l.balance>0){var e=l.balance;p(e)}else P(["You don't have a positive balance in that from account"])},children:"Transfer All"})]}):Object(A.jsx)(A.Fragment,{}),Object(A.jsx)(G.a,{disablePortal:!0,id:"toAccount",name:"toAccount",options:W,getOptionLabel:function(e){return e.name},isOptionEqualToValue:function(e,n){return e.name===n.name},sx:{width:300},onChange:function(e){console.log("Handling Currency change"),console.log("event: ",e);var n=e.target.textContent,t="";console.log("Account of event: ",t),n?(t=W.find((function(e){return e.name===n})),console.log("Account after filtering data: ",t),c(Object(i.a)({},t))):c({})},renderInput:function(e){return Object(A.jsx)(U.a,Object(i.a)(Object(i.a)({},e),{},{label:"To Account"}))}}),t.balance?Object(A.jsx)("div",{children:t.balance}):Object(A.jsx)(A.Fragment,{}),Object(A.jsx)(U.a,{name:"amount",onChange:Q,label:"Amount",value:O,placeholder:"0.00"}),Object(A.jsx)(U.a,{name:"description",onChange:Q,label:"Description",value:j,placeholder:"A quick note"}),Object(A.jsxs)(R.a,{sx:{width:"25ch"},children:[Object(A.jsx)(L.a,{id:"every",children:"Frequency"}),Object(A.jsxs)(H.a,{labelId:"every",id:"every",value:v,label:"How Often",name:"frequency",onChange:Q,children:[Object(A.jsx)(V.a,{value:"once",children:"once"}),Object(A.jsx)(V.a,{value:"daily",children:"daily"}),Object(A.jsx)(V.a,{value:"weekly",children:"weekly"}),Object(A.jsx)(V.a,{value:"fortnightly",children:"fortnightly"}),Object(A.jsx)(V.a,{value:"monthly",children:"monthly"}),Object(A.jsx)(V.a,{value:"quarterly",children:"quarterly"}),Object(A.jsx)(V.a,{value:"yearly",children:"yearly"})]})]}),Object(A.jsx)(Oe.a,{label:"On Date",value:k,minDate:new Date,onChange:function(e){w(e)},renderInput:function(e){return Object(A.jsx)(U.a,Object(i.a)({},e))}}),"once"!==v?Object(A.jsx)(Oe.a,{label:"Until",value:T,minDate:new Date,onChange:function(e){I(e)},renderInput:function(e){return Object(A.jsx)(U.a,Object(i.a)({},e))}}):Object(A.jsx)(A.Fragment,{}),Object(A.jsx)(f.a,{style:{cursor:"pointer"},type:"submit",variant:"outlined",children:"Submit"}),Object(A.jsx)("div",{id:"error",children:F.map((function(e){return Object(A.jsx)("div",{children:e})}))})]})})]})}var _e=t(301),Re=t(171),Le=t(316),He=(t(215),t(216),Object(l.a)({uri:"http://localhost:4000/graphql"})),Ve=Object(j.a)((function(e,n){var t=n.headers,a=w.getToken();return{headers:Object(i.a)(Object(i.a)({},t),{},{authorization:a?"Bearer ".concat(a):""})}})),Ue=new s.a({link:Ve.concat(He),cache:new u.a}),Ge=Object(Re.a)({typography:{fontFamily:"Saira",fontWeight:500},palette:{primary:{light:"#af8dff",main:"#7b5fe0",dark:"#4634ad",contrastText:"#ffffff"},secondary:{light:"#67ffd6",main:"#00eaa4",dark:"#00b675",contrastText:"#000000"}}});var Ke=function(){return Object(A.jsx)(d.a,{client:Ue,children:Object(A.jsx)(_e.a,{theme:Ge,children:Object(A.jsxs)(b.a,{children:[Object(A.jsx)($,{}),Object(A.jsx)(Le.a,{children:Object(A.jsxs)(h.c,{children:[Object(A.jsx)(h.a,{exact:!0,path:"/",children:Object(A.jsx)(Ne,{})}),Object(A.jsx)(h.a,{exact:!0,path:"/signin",children:Object(A.jsx)(Fe,{})}),Object(A.jsx)(h.a,{exact:!0,path:"/signup",children:Object(A.jsx)(Pe,{})}),Object(A.jsx)(h.a,{exact:!0,path:"/home",children:Object(A.jsx)(Te,{})}),Object(A.jsx)(h.a,{exact:!0,path:"/account/:id",children:Object(A.jsx)(qe,{})}),Object(A.jsx)(h.a,{exact:!0,path:"/createTransaction",children:Object(A.jsx)(Ye,{})}),Object(A.jsx)(h.a,{exact:!0,path:"/createAccount",children:Object(A.jsx)(Ae,{})})]})}),Object(A.jsx)(Y,{})]})})})},Me=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,318)).then((function(n){var t=n.getCLS,a=n.getFID,c=n.getFCP,o=n.getLCP,r=n.getTTFB;t(e),a(e),c(e),o(e),r(e)}))};r.a.render(Object(A.jsx)(c.a.StrictMode,{children:Object(A.jsx)(Ke,{})}),document.getElementById("root")),Me()}},[[217,1,2]]]);
//# sourceMappingURL=main.79729e81.chunk.js.map